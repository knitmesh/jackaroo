## ä¸€é“è€ƒå¯Ÿé—­åŒ…ä¸ä½œç”¨åŸŸçš„å°é¢˜

è¿™é“é¢˜ç®€å•çš„è€ƒå¯Ÿäº†é—­åŒ…ä¸ä½œç”¨åŸŸï¼Œå¾ˆæœ‰æ„æ€   

```
function test() {
  var n = 1;

  function add() {
    n++;
    console.log(n)
  }

  return {n: n, add: add}
}

var result = test();
var result2 = test();

result.add();
result.add();
console.log(result.n);
result2.add();
```

æ³¨æ„```test()```ä¸­å®šä¹‰å’Œè¿”å›çš„ä¸œè¥¿ï¼Œä¸è¦çœ‹èµ°çœ¼å’¯ğŸ˜€   

### èµ°èµ·æ¥ï¼

å…ˆè¯´ä¸€ä¸‹ï¼Œæœ€åè¾“å‡ºçš„ç»“æœæ˜¯   

```
2
3
1
2
```

è¿™é“é¢˜çš„ç²¾é«“æ˜¯```test()```çš„è¿”å›   

```test()```å®šä¹‰äº†å˜é‡```n```ä¸å‡½æ•°```add```å¹¶å°†å…¶è¿”å›ï¼Œä½¿å¾—```test()```åœ¨æ‰§è¡Œåå½¢æˆäº†é—­åŒ…å¯ä»¥è°ƒç”¨```test()```å†…éƒ¨```n```å’Œ```add```   

è¦æ³¨æ„çš„æ˜¯ï¼Œ```test()```è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œ**å¯¹è±¡çš„```n```æ˜¯```test```çš„```n```çš„å€¼ï¼Œ```add```æ˜¯```test()```çš„```add```**   

```
function test() {
  //...

  return {n: n, add: add}
}
```

è¿™æ˜¯å…³é”®ï¼   

ä¹‹åå®šä¹‰äº†ä¸¤ä¸ªå˜é‡```result```å’Œ```result2```   

```
var result = test();
var result2 = test();
```   

è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶```result```å’Œ```result2```åŒæ—¶æ‰§è¡Œ```test()```ï¼Œä½†**ä¸¤ä¸ªé—­åŒ…çš„ä½œç”¨åŸŸæ˜¯ç‹¬ç«‹çš„**ï¼Œå…¶ä¸­çš„```n```ä¸```add```ä¸ä¼šç›¸äº’å½±å“   

```
result.add();
result.add();
```   

```result```çš„ä¸¤æ¬¡```add```ï¼Œä¼šå½±å“```result```å½¢æˆçš„é—­åŒ…ä¸­çš„```n```ï¼Œæ­¤æ—¶```result```é—­åŒ…ä¸­çš„```n```ä¸º```3```ï¼Œè€Œ```result2```é—­åŒ…ä¸­çš„```n```ä¾ç„¶æ˜¯```1```ï¼   


```
console.log(result.n);
```

```result```çš„```n```å€¼ä¸º```1```ï¼Œæ³¨æ„```result```ä¸­çš„```n```ä¸```result```å½¢æˆé—­åŒ…ä¸­çš„```n```çš„åŒºåˆ«   

è¿™æ˜¯```test()```è¿”å›ç»“æ„çš„ä¸€ä¸ªéšœçœ¼æ³•   

æŠŠä»£ç æ”¹æˆä»¥ä¸‹çœ‹çœ‹ï¼Œä¼šå¸®åŠ©ä½ æ¥ç†è§£

```
function test() {
  //...

  return {x: n, add: add}//è¿™é‡Œè¿™é‡Œè¿™é‡Œï¼
}

result.add();
result.add();
console.log(result.n);//æƒ³æƒ³è¿™ä¸ªç»“æœ
```   

ä¸¤ä¸ªé—­åŒ…çš„ä½œç”¨åŸŸä¸ä¼šç›¸äº’å½±å“ï¼Œæ‰€ä»¥æœ€å```result2.add()```åé—­åŒ…é‡Œçš„```n```æ˜¯```2```
```
result2.add();//2
```

---

è¿™é“é¢˜æ˜¯å¯¹é—­åŒ…æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€ç»å…¸çš„è€ƒå¯Ÿï¼Œè¿˜æ˜¯å¸Œæœ›å¤§å®¶èƒ½å¤Ÿä»è¿™é“é¢˜ä¸­ä¸¾ä¸€åä¸‰ï¼Œèä¼šè´¯é€š
